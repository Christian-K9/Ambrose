#!/bin/bash
read -p "Server Or Client [s/c]: " machine_type


if [ "$machine_type" = "s" ]; then
    sudo systemctl enable sshd
    sudo systemctl start sshd
    sudo systemctl status sshd
    sudo cp sshd_config /etc/ssh/sshd_config
    sudo systemctl restart sshd
    sudo adduser sftpuser
    echo "Enter Password For Client"
    sudo passwd sftpuser
    sudo mkdir -o /home/sftpuser/upload
    sudo chown sftpuser:sftpuser /home/sftpuser/upload
    sudo chown root:root /home/sftpuser
    sudo systemctl restart sshd
    sudo firewall-cmd --permanent --add-service=ssh
    sudo firewall-cmd --reload
elif [ "$machine_type" = "c" ]; then
    read -p "Enter Server IP Address" ip_addr
    sftp $ip_addr <<EOF
    cd upload
    put sftp_file.txt
    ls
    bye
    EOF
else
    echo "Enter A Valid Input"